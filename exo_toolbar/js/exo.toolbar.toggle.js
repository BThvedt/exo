function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey(n.key),n)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"==_typeof(e)?e:e+""}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0===o)return("string"===t?String:Number)(e);o=o.call(e,t||"default");if("object"!=_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}(l=>{var e=(()=>_createClass(function e(){_classCallCheck(this,e),this.events={show:new ExoEvent,hide:new ExoEvent},this.items=new ExoCollection},[{key:"attach",value:function(o){var n=this,i=(this.toolbar=o).getRegions();o.getItems().each(function(e){var t=e.get("toggle");t&&!n.items.has(e.getId())&&(i.getNonEmpty().has(t.region)||1===t.ajax?n.items.getById(e.getId())||n.items.add(e.getId(),new g(n,o,e)):e.getElement().remove())})}},{key:"getShown",value:function(){var o=new ExoCollection;return this.items.each(function(e,t){e.isShown()&&o.add(t,e)}),o}},{key:"getShownByEdge",value:function(o){var n=new ExoCollection;return this.getShown().each(function(e,t){e.getRegion().getEdge()===o&&n.add(t,e)}),n}},{key:"getShownByRegionId",value:function(o){var n=new ExoCollection;return this.getShown().each(function(e,t){e.getRegion().getId()===o&&n.add(t,e)}),n}},{key:"hide",value:function(e){e=this.getShown().getById(e);return e&&e.hide(),this}},{key:"hideByRegionId",value:function(t){return this.getShown().each(function(e){e.getRegion().getId()===t&&e.hide()}),this}},{key:"hideAll",value:function(){return this.getShown().each(function(e){e.hide()}),this}},{key:"hideAllExceptEdge",value:function(t){return this.getShown().each(function(e){e.getRegion().getEdge()!==t&&e.hide()}),this}},{key:"hideAllAfterRegion",value:function(e){var e=this.toolbar.getRegion(e),t=e.getOffset();return this.getShownByEdge(e.getEdge()).each(function(e){e.getRegion().getOffset()>t&&e.hide()}),this}},{key:"event",value:function(e){return void 0!==this.events[e]?this.events[e].expose():null}}]))(),g=(l.ExoToolbarToggle=new e,(()=>_createClass(function e(t,o,n){_classCallCheck(this,e),this.shown=!1,this.toggleOptions=n.get("toggle"),this.toggleController=t,this.toolbar=o,this.item=n,this.region=o.getRegion(this.toggleOptions.region),this.ajax=1===this.toggleOptions.ajax,this.event=this.ajax?"click":this.toggleOptions.event,this.buildBindings(),this.ajax||this.buildEvents()},[{key:"buildBindings",value:function(){var t,n=this,o=!1;"hover"===this.event&&this.item.getElement().on("mouseenter.exoToolbarToggle",function(e){e.preventDefault(),o=!0,setTimeout(function(){o=!1},1e3),t=setTimeout(function(){n.show()},250)}).on("mouseleave.exoToolbarToggle",function(e){clearTimeout(t)}),this.item.getElement().on("click.exoToolbarToggle",function(e){e.preventDefault(),!1===o&&(n.ajax&&!n.region?l.ajax({url:"/api/exo/toolbar/region/"+n.toggleOptions.region.replace("item:","")}).execute().done(function(e,t,o){l.ExoToolbar.isReady().then(function(){n.region=n.toolbar.getRegion(n.toggleOptions.region),n.region&&(n.buildEvents(),n.toggle())})}):n.toggle())})}},{key:"buildEvents",value:function(){var t=this;"vertical"===this.region.getAlignment()&&(this.region.event("expand").on("toggle."+this.item.getId(),function(e){t.toggleController.hideAllExceptEdge(t.region.getEdge())}),this.region.event("contracted").on("toggle."+this.item.getId(),function(e){t.hide()}))}},{key:"isShown",value:function(){return!0===this.shown}},{key:"toggle",value:function(){this.isShown()?this.hide():this.show()}},{key:"isNested",value:function(){return this.item.getRegion().getEdge()===this.region.getEdge()}},{key:"isSameAlignment",value:function(){return this.item.getRegion().getAlignment()===this.region.getAlignment()}},{key:"show",value:function(){var r=this;return new Promise(function(t,e){if(r.isShown())t(!0);else{if(r.region.positionLock(!0),r.isNested()){var o={},n=!1;if(r.toggleController.getShownByEdge(r.region.getEdge()).each(function(e){r.item.getRegion().getId()===e.getItem().getRegion().getId()&&(n=!0,e.hide().then(function(){r.show().then(function(e){t(e)})}))}),n)return;r.toolbar.getEdgeOffsetsByEdge(r.region.getEdge()).forEach(function(e){o[e]=r.item.getRegion().getElement().css(e)}),r.region.getElement().css(o),r.item.getRegion().getElement().removeClass(r.toolbar.regionLastClass),l.ExoModal&&l.ExoModal.closeAll()}else{var i,g;r.item.getRegion().get("toggleable")||(r.isSameAlignment()?(i={},r.toolbar.getEdgeOffsetsByEdge(r.region.getEdge()).forEach(function(e){i[e]=r.toolbar.getRegionSizeByEdge(e)}),r.region.getElement().css(i)):((g={})[r.item.getRegion().getEdge()]=r.item.getRegion().getSize()+r.item.getRegion().getOffset(),r.region.getElement().css(g),r.item.getRegion().zIndexSet("PARENT"),r.toolbar.zIndexRegionEdgeLock(r.item.getRegion().getEdge(),!0))),r.toggleController.hideAll()}r.toolbar.zIndexRegionEdgeLock(r.region.getEdge(),!1).zIndexRegionEdge(r.region.getEdge(),"FOCUSED").zIndexRegionEdgeLock(r.region.getEdge(),!0),r.toggleController.event("show").trigger(r),r.shown=!0,r.item.getElement().addClass(r.toolbar.itemActiveClass),r.region.show(!0,!0).then(function(e){t(e)}),r.region.getElement().addClass(r.toolbar.regionLastClass),l.Exo.showShadow({opacity:.3,onClick:function(e){r.hide()}})}})}},{key:"hide",value:function(){var o=this;return new Promise(function(t,e){o.isShown()?(o.shown=!1,o.isNested()?o.item.getRegion().getElement().addClass(o.toolbar.regionLastClass):o.toggleController.hideAll(),o.toggleController.event("hide").trigger(o),o.region.hide(!0).then(function(e){o.item.getRegion().get("toggleable")||o.isSameAlignment()||o.toolbar.zIndexRegionEdgeLock(o.item.getRegion().getEdge(),!1).zIndexRegionEdge(o.item.getRegion().getEdge()),o.region.positionLock(!1),t(e)}),o.item.getElement().removeClass(o.toolbar.itemActiveClass),o.region.getElement().removeClass(o.toolbar.regionLastClass),o.region.isExpandedByDefault()||o.region.getElement().removeClass(o.toolbar.regionExpandedClass),l.Exo.hideShadow()):(o.region.positionLock(!1),t(!0))})}},{key:"getRegion",value:function(){return this.region}},{key:"getItem",value:function(){return this.item}}]))());l.behaviors.exoToolbarToggle={attach:function(e){l.ExoToolbar.isAdminMode()||l.ExoToolbar.isReady().then(function(e){e.each(function(e){l.ExoToolbarToggle.attach(e)})})}}})((jQuery,Drupal),drupalSettings);