"use strict";function _classCallCheck(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,i){for(var n=0;n<i.length;n++){var t=i[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function _createClass(e,i,n){return i&&_defineProperties(e.prototype,i),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}!function(a,o,s){var t=function(){function r(e,i){_classCallCheck(this,r),this.id="",this.$wrapper=i,this.id=e;var e=i.find(".swiper-pagination"),n=i.find(".swiper-button-next"),t=i.find(".swiper-button-prev"),i=i.find(".swiper-scrollbar"),o={pagination:{},navigation:{},scrollbar:{}},e=(e.length&&(o.pagination.el=e.get(0)),n.length&&(o.navigation.nextEl=n.get(0)),t.length&&(o.navigation.prevEl=t.get(0)),i.length&&(o.scrollbar.el=i.get(0)),a.extend(!0,{},o,this.$wrapper.data("ee--slider-settings")||{}));this.swiper=new s(this.$wrapper.get(0),e),this.isLayoutBuilder()&&this.buildForLayoutBuilder()}return _createClass(r,[{key:"buildForLayoutBuilder",value:function(){var t=this;a(document).on("exoComponentOps.exo.alchemist.enhancement.slider."+this.id,function(e,i){o.ExoAlchemistAdmin.getActiveComponent().find(t.$wrapper).length&&((i=a(i)).find(".exo-field-op-rotator-prev").off("click").on("click",function(e){e.preventDefault(),t.swiper.slidePrev()}),i.find(".exo-field-op-rotator-next").off("click").on("click",function(e){e.preventDefault(),t.swiper.slideNext()}))}),a(document).on("exoComponentFieldEditActive.exo.alchemist.enhancement.slider."+this.id,function(e,i){var n=a(i);t.$wrapper.find(n).length&&(t.swiper.slideTo(n.index()),t.swiper.once("slideChangeTransitionEnd",function(){o.ExoAlchemistAdmin.sizeFieldOverlay(n),o.ExoAlchemistAdmin.sizeTarget(n)}))})}},{key:"unload",value:function(){a(document).off("exoComponentOps.exo.alchemist.enhancement.slider."+this.id),a(document).off("exoComponentFieldEditActive.exo.alchemist.enhancement.slider."+this.id),this.swiper.destroy()}},{key:"isLayoutBuilder",value:function(){return o.ExoAlchemistAdmin&&o.ExoAlchemistAdmin.isLayoutBuilder()}}]),r}();o.behaviors.exoAlchemistEnhancementSlider={count:0,instances:{},attach:function(e){var n=this;a(".ee--slider-wrapper",e).once("exo.alchemist.enhancement").each(function(){var e=a(this),i=e.data("ee--slider-id");e.data("ee--slider-count",n.count),n.instances[i+n.count]=new t(i,e),n.count++})},detach:function(e,i,n){var t;"unload"===n&&(t=this,a(".ee--slider-wrapper",e).each(function(){var e=a(this),e=e.data("ee--slider-id")+e.data("ee--slider-count");void 0!==t.instances[e]&&(t.instances[e].unload(),delete t.instances[e])}))}}}(jQuery,Drupal,Swiper);