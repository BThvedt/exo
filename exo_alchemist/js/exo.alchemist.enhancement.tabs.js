"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey(n.key),n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!==_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}!function(o,s){var n=function(){function i(e,t){var n=this,e=(_classCallCheck(this,i),this.id="",this.idSelector="",this.history=!1,this.$wrapper=t,this.id=e,this.idSelector='data-ee--tabs-id="'+this.id+'"',this.$triggers=t.find(".ee--tabs-trigger["+this.idSelector+"]"),this.$contents=t.find(".ee--tabs-content["+this.idSelector+"]"),this.history=void 0!==t.data("ee--accordion-history"),this.$contents.hide(),this.$triggers.first());s.Exo.$window.on("popstate.exo.alchemist.enhancement.tabs."+this.id,function(e){var t=s.ExoAlchemistEnhancement.getHashForKey("ee--tabs");t&&void 0!==t[n.id]?(t=n.$triggers.filter('[data-ee--tab-id="'+t[n.id]+'"]')).length&&n.show(t.first(),!1):n.show(n.$triggers.first(),!1)}),this.isLayoutBuilder()?(s.ExoAlchemistAdmin.lockNestedFields(this.$triggers),s.Exo.$document.on("exoComponentFieldEditActive.exo.alchemist.enhancement.tabs",function(e,t){var t=o(t),i=t.closest(".ee--tabs-content");i.length&&(i=i.data("ee--tab-id"),i=n.$triggers.filter('[data-ee--tab-id="'+i+'"]'),n.show(i,n.history),s.ExoAlchemistAdmin.sizeFieldOverlay(t),s.ExoAlchemistAdmin.sizeTarget(t))})):(t=s.ExoAlchemistEnhancement.getHashForKey("ee--tabs"))&&void 0!==t[this.id]&&(t=this.$triggers.filter('[data-ee--tab-id="'+t[this.id]+'"]')).length&&(e=t.first()),this.show(e,!1),this.$triggers.on("click.exo.alchemist.enhancement.tabs",function(e){e.preventDefault(),n.show(o(e.currentTarget),n.history)}).on("keydown.exo.alchemist.enhancement.accordion",function(e){var t;switch(e.which){case 13:case 32:e.preventDefault(),e.stopPropagation(),n.show(o(e.currentTarget),n.history);break;case 40:e.preventDefault(),e.stopPropagation(),(t=o(e.currentTarget).next()).length&&(n.show(t,n.history),t.focus());break;case 38:e.preventDefault(),e.stopPropagation(),(t=o(e.currentTarget).prev()).length&&(n.show(t,n.history),t.focus())}})}return _createClass(i,[{key:"show",value:function(e,t){var i,n=e.data("ee--tab-id");t=!1!==t,e.hasClass("active")||(this.$triggers.removeClass("active"),e.addClass("active"),this.$contents.removeClass("active").hide(),(i=this.$contents.filter('[data-ee--tab-id="'+n+'"]')).addClass("active").show(),s.Exo.$window.trigger("ee--tab.open",{trigger:e,content:i}),s.Exo.checkElementPosition(),this.isLayoutBuilder()?(s.ExoAlchemistAdmin.lockNestedFields(this.$triggers),s.ExoAlchemistAdmin.unlockNestedFields(e)):t&&s.ExoAlchemistEnhancement.setHashForKey("ee--tabs",n,this.id))}},{key:"buildTabHash",value:function(e){return"ee--tab-"+this.id+"--"+e}},{key:"extractTabIdFromHash",value:function(e){return e.replace("ee--tab-","").split("--")[1]}},{key:"unload",value:function(){s.Exo.$document.off("exoComponentFieldEditActive.exo.alchemist.enhancement.tabs."+this.id),s.Exo.$window.off("popstate.exo.alchemist.enhancement.tabs."+this.id)}},{key:"isLayoutBuilder",value:function(){return s.ExoAlchemistAdmin&&s.ExoAlchemistAdmin.isLayoutBuilder()}}]),i}();s.behaviors.exoAlchemistEnhancementTabs={count:0,instances:{},attach:function(e){var i=this;o(".ee--tabs-wrapper",e).once("exo.alchemist.enhancement").each(function(){var e=o(this),t=e.data("ee--tabs-id");e.data("ee--tabs-count",i.count),i.instances[t+i.count]=new n(t,e),i.count++})},detach:function(e,t,i){var n;"unload"===i&&(n=this,o(".ee--tabs-wrapper",e).each(function(){var e=o(this),e=e.data("ee--tabs-id")+e.data("ee--tabs-count");void 0!==n.instances[e]&&(n.instances[e].unload(),delete n.instances[e])}))}}}(jQuery,Drupal);