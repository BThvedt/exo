"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,_toPropertyKey(o.key),o)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){t=_toPrimitive(t,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}!function(a,s){var o=function(){function o(t,e){var n=this;_classCallCheck(this,o),this.id="",this.speed=5e3,this.lock=!1,this.$wrapper=e,this.id=t,this.$items=e.find(".ee--rotator-item"),1<this.$items.length?(this.$itemsWrapper=e.find(".ee--rotator-items"),this.$nav=this.$wrapper.find(".ee--rotator-nav"),this.$prev=this.$wrapper.find(".ee--rotator-prev"),this.$next=this.$wrapper.find(".ee--rotator-next"),this.$navItems=this.$nav.find(".ee--rotator-nav-item"),this.$current=this.$items.first(),this.$itemsWrapper.css({position:"relative"}),this.$items.each(function(t,e){a(e).data("ee--rotator-index",t).trigger("exoAlchemistRotatorHide")}).hide(),this.$current.show(),setTimeout(function(){n.$current.trigger("exoAlchemistRotatorShow")}),this.setTimeout(),this.$wrapper.on("keydown",function(t){switch(t.which){case 39:t.preventDefault(),t.stopPropagation(),n.next();break;case 37:t.preventDefault(),t.stopPropagation(),n.prev()}}).on("swiperight",function(t){t.preventDefault(),t.stopPropagation(),n.next()}).on("swipeleft",function(t){t.preventDefault(),t.stopPropagation(),n.prev()}),this.$prev.on("click",function(t){n.prev()}).on("keydown",function(t){switch(t.which){case 13:case 32:t.preventDefault(),t.stopPropagation(),n.prev()}}),this.$next.on("click",function(t){n.next()}).on("keydown",function(t){switch(t.which){case 13:case 32:t.preventDefault(),t.stopPropagation(),n.next()}}),this.$nav.length&&1<this.$navItems.length&&(this.$navItems.first().addClass("active"),this.$navItems.each(function(t,e){a(e).data("ee--rotator-index",t)}).on("click",function(t){n.goto(a(t.target).data("ee--rotator-index"))}).on("keydown",function(t){switch(t.which){case 13:case 32:t.preventDefault(),t.stopPropagation(),n.goto(a(t.target).data("ee--rotator-index"))}})),this.isLayoutBuilder()?this.buildForLayoutBuilder():this.$wrapper.data("ee--rotator-pauseonhover")&&this.$wrapper.on("mouseover",function(t){n.pause()}).on("mouseleave",function(t){n.play()})):this.$items.first().trigger("exoAlchemistRotatorShow")}function t(){return e.apply(this,arguments)}var e;return _createClass(o,[{key:"setTimeout",value:(e=function(){var t=this;clearTimeout(this.timeout),this.timeout=setTimeout(function(){t.cycle()},this.$wrapper.data("ee--rotator-speed")||this.speed)},t.toString=function(){return e.toString()},t)},{key:"buildForLayoutBuilder",value:function(){var o=this;this.$prev.length&&this.$prev.on("click",function(t){o.pause()}),this.$next.length&&this.$next.on("click",function(t){o.pause()}),this.$navItems.length&&this.$navItems.on("click",function(t){o.pause()}),a(document).on("exoComponentOps.exo.alchemist.enhancement.rotator."+this.id,function(t,e){s.ExoAlchemistAdmin.getActiveComponent().find(o.$wrapper).length&&((e=a(e)).find(".exo-field-op-rotator-prev").off("click").on("click",function(t){t.preventDefault(),o.prev()}),e.find(".exo-field-op-rotator-next").off("click").on("click",function(t){t.preventDefault(),o.next()}))}),a(document).on("exoComponentActive.exo.alchemist.enhancement.rotator."+this.id,function(t,e){a(e).find(o.$wrapper).length&&(o.$prev.length||o.$next.length||o.$navItems.length)&&o.pause()}),a(document).on("exoComponentInactive.exo.alchemist.enhancement.rotator."+this.id,function(t,e){a(e).find(o.$wrapper).length&&o.play()}),a(document).on("exoComponentFieldEditActive.exo.alchemist.enhancement.rotator."+this.id,function(t,e){var n,e=a(e);o.$wrapper.find(e).length&&(o.pause(),(n=o.$items.filter(e)).length?n.length||(n=e.find(".ee--rotator-item")):n=e.closest(".ee--rotator-item"),n.length)&&n.data("ee--rotator-index")!==o.$current.data("ee--rotator-index")&&(o.cycle(n,0),s.ExoAlchemistAdmin.sizeFieldOverlay(e),s.ExoAlchemistAdmin.sizeTarget(e))}),a(document).on("exoComponentFieldEditInactive.exo.alchemist.enhancement.rotator."+this.id,function(t,e){e=a(e);!o.$wrapper.find(e).length||o.$prev.length||o.$next.length||o.$navItems.length||o.play()})}},{key:"pause",value:function(){clearTimeout(this.timeout)}},{key:"play",value:function(){this.setTimeout()}},{key:"prev",value:function(){this.cycle(this.getPrev())}},{key:"next",value:function(){this.cycle()}},{key:"goto",value:function(n){var o=this;this.$items.each(function(t,e){t===n&&o.cycle(a(e))})}},{key:"getNext",value:function(){var t=this.$current.next();return t=0!==t.length&&t.hasClass("ee--rotator-item")?t:this.$items.first()}},{key:"getPrev",value:function(){var t=this.$current.prev();return t=0!==t.length&&t.hasClass("ee--rotator-item")?t:this.$items.last()}},{key:"cycle",value:function(t,e){var n=this,o=(this.setTimeout(),this.$current.data("ee--rotator-index")),i=(e=void 0!==e?e:1e3,this.$current),r=(i.css({zIndex:2,position:"relative"}),(t=t||this.getNext()).data("ee--rotator-index"));!0!==this.lock&&r!==o&&(this.lock=!0,t.css({zIndex:1,position:"absolute",top:0,left:0,right:0}),this.$itemsWrapper.height(i.outerHeight()),this.$navItems.length&&(this.$navItems.removeClass("active"),a(this.$navItems.get(r)).addClass("active")),setTimeout(function(){t.show().trigger("exoAlchemistRotatorShow"),s.Exo.checkElementPosition(),n.$itemsWrapper.height(t.outerHeight()),i.css("z-index",2),setTimeout(function(){i.fadeOut(e,"swing",function(){i.trigger("exoAlchemistRotatorHide"),n.$itemsWrapper.height(""),t.css({position:"relative"}),n.lock=!1})}),n.$current=t}))}},{key:"unload",value:function(){a(document).off("exoComponentOps.exo.alchemist.enhancement.rotator."+this.id),a(document).off("exoComponentActive.exo.alchemist.enhancement.rotator."+this.id),a(document).off("exoComponentInactive.exo.alchemist.enhancement.rotator."+this.id),a(document).off("exoComponentFieldEditActive.exo.alchemist.enhancement.rotator."+this.id),a(document).off("exoComponentFieldEditInactive.exo.alchemist.enhancement.rotator."+this.id)}},{key:"isLayoutBuilder",value:function(){return s.ExoAlchemistAdmin&&s.ExoAlchemistAdmin.isLayoutBuilder()}}]),o}();s.behaviors.exoAlchemistEnhancementRotator={count:0,instances:{},attach:function(t){var n=this;a(".ee--rotator-wrapper").once("exo.alchemist.enhancement").each(function(){var t=a(this),e=t.data("ee--rotator-id");n.instances[e+n.count]=new o(e,t),t.data("ee--rotator-count",n.count),n.count++})},detach:function(t,e,n){var o;"unload"===n&&(o=this,a(".ee--rotator-wrapper",t).each(function(){var t=a(this),t=t.data("ee--rotator-id")+t.data("ee--rotator-count");void 0!==o.instances[t]&&(o.instances[t].unload(),delete o.instances[t])}))}}}(jQuery,Drupal);