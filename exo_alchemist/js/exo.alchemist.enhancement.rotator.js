function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,o){return e&&_defineProperties(t.prototype,e),o&&_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){t=_toPrimitive(t,"string");return"symbol"==_typeof(t)?t:t+""}function _toPrimitive(t,e){if("object"!=_typeof(t)||!t)return t;var o=t[Symbol.toPrimitive];if(void 0===o)return("string"===e?String:Number)(t);o=o.call(t,e||"default");if("object"!=_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}((a,s)=>{var n=(()=>{return _createClass(function t(e,o){var n=this;_classCallCheck(this,t),this.id="",this.speed=5e3,this.lock=!1,this.$wrapper=o,this.id=e,this.$items=o.find(".ee--rotator-item"),1<this.$items.length?(this.$itemsWrapper=o.find(".ee--rotator-items"),this.$nav=this.$wrapper.find(".ee--rotator-nav"),this.$prev=this.$wrapper.find(".ee--rotator-prev"),this.$next=this.$wrapper.find(".ee--rotator-next"),this.$navItems=this.$nav.find(".ee--rotator-nav-item"),this.$current=this.$items.first(),this.$itemsWrapper.css({position:"relative"}),this.$items.each(function(t,e){a(e).data("ee--rotator-index",t).trigger("exoAlchemistRotatorHide")}).hide(),this.$current.show(),setTimeout(function(){n.$current.trigger("exoAlchemistRotatorShow")}),this.setTimeout(),this.$wrapper.on("keydown",function(t){switch(t.which){case 39:t.preventDefault(),t.stopPropagation(),n.next();break;case 37:t.preventDefault(),t.stopPropagation(),n.prev()}}).on("swiperight",function(t){t.preventDefault(),t.stopPropagation(),n.next()}).on("swipeleft",function(t){t.preventDefault(),t.stopPropagation(),n.prev()}),this.$prev.on("click",function(t){n.prev()}).on("keydown",function(t){switch(t.which){case 13:case 32:t.preventDefault(),t.stopPropagation(),n.prev()}}),this.$next.on("click",function(t){n.next()}).on("keydown",function(t){switch(t.which){case 13:case 32:t.preventDefault(),t.stopPropagation(),n.next()}}),this.$nav.length&&1<this.$navItems.length&&(this.$navItems.first().addClass("active"),this.$navItems.each(function(t,e){a(e).data("ee--rotator-index",t)}).on("click",function(t){n.goto(a(t.target).data("ee--rotator-index"))}).on("keydown",function(t){switch(t.which){case 13:case 32:t.preventDefault(),t.stopPropagation(),n.goto(a(t.target).data("ee--rotator-index"))}})),this.isLayoutBuilder()?this.buildForLayoutBuilder():this.$wrapper.data("ee--rotator-pauseonhover")&&this.$wrapper.on("mouseover",function(t){n.pause()}).on("mouseleave",function(t){n.play()})):this.$items.first().trigger("exoAlchemistRotatorShow")},[{key:"setTimeout",value:(e=function(){var t=this;clearTimeout(this.timeout),this.timeout=setTimeout(function(){t.cycle()},this.$wrapper.data("ee--rotator-speed")||this.speed)},t.toString=function(){return e.toString()},t)},{key:"buildForLayoutBuilder",value:function(){var n=this;this.$prev.length&&this.$prev.on("click",function(t){n.pause()}),this.$next.length&&this.$next.on("click",function(t){n.pause()}),this.$navItems.length&&this.$navItems.on("click",function(t){n.pause()}),a(document).on("exoComponentOps.exo.alchemist.enhancement.rotator."+this.id,function(t,e){s.ExoAlchemistAdmin.getActiveComponent().find(n.$wrapper).length&&((e=a(e)).find(".exo-field-op-rotator-prev").off("click").on("click",function(t){t.preventDefault(),n.prev()}),e.find(".exo-field-op-rotator-next").off("click").on("click",function(t){t.preventDefault(),n.next()}))}),a(document).on("exoComponentActive.exo.alchemist.enhancement.rotator."+this.id,function(t,e){a(e).find(n.$wrapper).length&&(n.$prev.length||n.$next.length||n.$navItems.length)&&n.pause()}),a(document).on("exoComponentInactive.exo.alchemist.enhancement.rotator."+this.id,function(t,e){a(e).find(n.$wrapper).length&&n.play()}),a(document).on("exoComponentFieldEditActive.exo.alchemist.enhancement.rotator."+this.id,function(t,e){var o,e=a(e);n.$wrapper.find(e).length&&(n.pause(),(o=(o=n.$items.filter(e)).length?o:e.closest(".ee--rotator-item")).length)&&o.data("ee--rotator-index")!==n.$current.data("ee--rotator-index")&&(n.cycle(o,0),s.ExoAlchemistAdmin.sizeFieldOverlay(e),s.ExoAlchemistAdmin.sizeTarget(e))}),a(document).on("exoComponentFieldEditInactive.exo.alchemist.enhancement.rotator."+this.id,function(t,e){e=a(e);!n.$wrapper.find(e).length||n.$prev.length||n.$next.length||n.$navItems.length||n.play()})}},{key:"pause",value:function(){clearTimeout(this.timeout)}},{key:"play",value:function(){this.setTimeout()}},{key:"prev",value:function(){this.cycle(this.getPrev())}},{key:"next",value:function(){this.cycle()}},{key:"goto",value:function(o){var n=this;this.$items.each(function(t,e){t===o&&n.cycle(a(e))})}},{key:"getNext",value:function(){var t=this.$current.next();return t=0!==t.length&&t.hasClass("ee--rotator-item")?t:this.$items.first()}},{key:"getPrev",value:function(){var t=this.$current.prev();return t=0!==t.length&&t.hasClass("ee--rotator-item")?t:this.$items.last()}},{key:"cycle",value:function(t,e){var o=this,n=(this.setTimeout(),this.$current.data("ee--rotator-index")),i=(e=void 0!==e?e:1e3,this.$current),r=(i.css({zIndex:2,position:"relative"}),(t=t||this.getNext()).data("ee--rotator-index"));!0!==this.lock&&r!==n&&(this.lock=!0,t.css({zIndex:1,position:"absolute",top:0,left:0,right:0}),this.$itemsWrapper.height(i.outerHeight()),this.$navItems.length&&(this.$navItems.removeClass("active"),a(this.$navItems.get(r)).addClass("active")),setTimeout(function(){t.show().trigger("exoAlchemistRotatorShow"),s.Exo.checkElementPosition(),o.$itemsWrapper.height(t.outerHeight()),i.css("z-index",2),setTimeout(function(){i.fadeOut(e,"swing",function(){i.trigger("exoAlchemistRotatorHide"),o.$itemsWrapper.height(""),t.css({position:"relative"}),o.lock=!1})}),o.$current=t}))}},{key:"unload",value:function(){a(document).off("exoComponentOps.exo.alchemist.enhancement.rotator."+this.id),a(document).off("exoComponentActive.exo.alchemist.enhancement.rotator."+this.id),a(document).off("exoComponentInactive.exo.alchemist.enhancement.rotator."+this.id),a(document).off("exoComponentFieldEditActive.exo.alchemist.enhancement.rotator."+this.id),a(document).off("exoComponentFieldEditInactive.exo.alchemist.enhancement.rotator."+this.id)}},{key:"isLayoutBuilder",value:function(){return s.ExoAlchemistAdmin&&s.ExoAlchemistAdmin.isLayoutBuilder()}}]);function t(){return e.apply(this,arguments)}var e})();s.behaviors.exoAlchemistEnhancementRotator={count:0,instances:{},attach:function(t){var o=this;a(".ee--rotator-wrapper").once("exo.alchemist.enhancement").each(function(){var t=a(this),e=t.data("ee--rotator-id");o.instances[e+o.count]=new n(e,t),t.data("ee--rotator-count",o.count),o.count++})},detach:function(t,e,o){var n;"unload"===o&&(n=this,a(".ee--rotator-wrapper",t).each(function(){var t=a(this),t=t.data("ee--rotator-id")+t.data("ee--rotator-count");void 0!==n.instances[t]&&(n.instances[t].unload(),delete n.instances[t])}))}}})(jQuery,Drupal);